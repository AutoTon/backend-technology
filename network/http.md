# http

## 浏览器缓存

### 强缓存

#### 原理

不发请求到服务器，从客户端缓存中加载资源。

#### 响应

http状态码为200,size显示“from cache”

#### header实现

+ Expires：描述一个绝对时间，由服务器返回。
+ Cache-Control：描述一个相对时间，以秒为单位。优先级高于Expires。

### 协商缓存

#### 原理

会发请求到服务器，但从客户端缓存中加载资源。

#### 响应

http状态码为304（Not Modified）

#### header实现

+ Last-Modified，If-Modified-Since：描述服务器上资源的修改时间。
+ ETag、If-None-Match：描述服务器上资源内容的修改，会根据算法生成资源的唯一标识，只跟资源内容是否变化有关。

#### 分布式系统注意事项

+ 分布式系统里多台机器间文件的Last-Modified必须保持一致，以免负载均衡到不同机器导致比对失败
+ 分布式系统尽量关闭掉ETag(每台机器生成的ETag都会不一样）

### 浏览器行为

+ ctrl+F5：跳过强缓存和协商缓存
+ F5：只跳过强缓存

## Restful API规范

### GET

不能改变服务器上任何RestFul资源的状态。

### PUT

保存数据，必须保证幂等。意思是同样的请求数据，无论请求多少次，服务器上资源的最终状态都为一致。

### DELETE

删除数据，必须保证幂等。

### POST

适用于诸多场景。允许不保证幂等。